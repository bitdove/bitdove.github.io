<!DOCTYPE html>
<html lang="zh" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content=" 免责声明： 本文所述内容仅供技术学习和研究使用，不构成任何形式的非法行为指导。请读者严格遵守所在地区的法律法规，自行判断和承担使用相关技术可能带来的风险。作者不对因使用本文内容而产生的任何法律责任承担责任。\n">
<title>【代理】在一台废弃VPS上重新走一遍Xray-core代理配置流程</title>

<link rel='canonical' href='https://bitdove.github.io/posts/%E4%BB%A3%E7%90%86%E5%9C%A8%E4%B8%80%E5%8F%B0%E5%BA%9F%E5%BC%83vps%E4%B8%8A%E9%87%8D%E6%96%B0%E8%B5%B0%E4%B8%80%E9%81%8Dxray-core%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE%E6%B5%81%E7%A8%8B/'>

<link rel="stylesheet" href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="【代理】在一台废弃VPS上重新走一遍Xray-core代理配置流程">
<meta property='og:description' content=" 免责声明： 本文所述内容仅供技术学习和研究使用，不构成任何形式的非法行为指导。请读者严格遵守所在地区的法律法规，自行判断和承担使用相关技术可能带来的风险。作者不对因使用本文内容而产生的任何法律责任承担责任。\n">
<meta property='og:url' content='https://bitdove.github.io/posts/%E4%BB%A3%E7%90%86%E5%9C%A8%E4%B8%80%E5%8F%B0%E5%BA%9F%E5%BC%83vps%E4%B8%8A%E9%87%8D%E6%96%B0%E8%B5%B0%E4%B8%80%E9%81%8Dxray-core%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE%E6%B5%81%E7%A8%8B/'>
<meta property='og:site_name' content='空山无我心自闲'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Proxy' /><meta property='article:published_time' content='2025-08-13T11:13:26&#43;08:00'/><meta property='article:modified_time' content='2025-08-13T11:13:26&#43;08:00'/>
<meta name="twitter:title" content="【代理】在一台废弃VPS上重新走一遍Xray-core代理配置流程">
<meta name="twitter:description" content=" 免责声明： 本文所述内容仅供技术学习和研究使用，不构成任何形式的非法行为指导。请读者严格遵守所在地区的法律法规，自行判断和承担使用相关技术可能带来的风险。作者不对因使用本文内容而产生的任何法律责任承担责任。\n">
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "dark");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu16717790870751216787.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">空山无我心自闲</a></h1>
            <h2 class="site-description"></h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>首页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>链接</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span></span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title"></h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#前言">前言</a></li>
    <li><a href="#系统选择">系统选择</a>
      <ol>
        <li><a href="#换源与更新系统">换源与更新系统</a></li>
      </ol>
    </li>
    <li><a href="#配置vps">配置VPS</a></li>
    <li><a href="#安装xray-core">安装Xray-core</a></li>
    <li><a href="#配置xray-core">配置Xray-core</a>
      <ol>
        <li><a href="#生成uuid">生成uuid</a></li>
        <li><a href="#生成x25519公私钥">生成x25519公私钥</a></li>
        <li><a href="#生成shortids">生成shortIds</a></li>
        <li><a href="#修改xray配置文件">修改Xray配置文件</a></li>
      </ol>
    </li>
    <li><a href="#运行xray-core">运行Xray-core</a></li>
    <li><a href="#客户端配置">客户端配置</a>
      <ol>
        <li><a href="#android">Android</a></li>
        <li><a href="#windows">Windows</a></li>
        <li><a href="#macos">macOS</a></li>
      </ol>
    </li>
    <li><a href="#reference">Reference</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E7%94%9F%E6%B4%BB%E4%B8%8E%E5%85%B4%E8%B6%A3/" style="background-color: #2a9d8f; color: #fff;">
                生活与兴趣
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/posts/%E4%BB%A3%E7%90%86%E5%9C%A8%E4%B8%80%E5%8F%B0%E5%BA%9F%E5%BC%83vps%E4%B8%8A%E9%87%8D%E6%96%B0%E8%B5%B0%E4%B8%80%E9%81%8Dxray-core%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE%E6%B5%81%E7%A8%8B/">【代理】在一台废弃VPS上重新走一遍Xray-core代理配置流程</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2025/08/13</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <blockquote>
<p><strong>免责声明</strong>：
本文所述内容仅供技术学习和研究使用，不构成任何形式的非法行为指导。请读者严格遵守所在地区的法律法规，自行判断和承担使用相关技术可能带来的风险。作者不对因使用本文内容而产生的任何法律责任承担责任。</p>
</blockquote>
<h1 id="前言">前言
</h1><blockquote>
<p>这是一台即将到期的RackNerd的VPS，我已不打算续费。在它生命即将走到尽头之际，我打算用它重新配置一遍Xray-core，并作此记录，以留后用。</p>
</blockquote>
<h1 id="系统选择">系统选择
</h1><p>仅用作代理的VPS，系统求稳定即可。所以我选择安装了<strong>Debian 10 64 Bit</strong>。</p>
<p><img src="https://raw.githubusercontent.com/bitdove/PicsBed_1/main/re-config-VPS/Debian10.png"
	
	
	
	loading="lazy"
	
		alt="Debian 10 64 Bit"
	
	
></p>
<h2 id="换源与更新系统">换源与更新系统
</h2><p>执行<code>apt update</code>时会遇到错误，这是因为Debian 10（Buster）已经停止官方支持，APT 源被移到 archive.debian.org，所以用原来的地址会 404。要解决这个问题，需要手动改APT源到归档源，然后才能继续更新和安装。</p>
<ol>
<li>
<p>修改 APT 源
先备份原来的源：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cp /etc/apt/sources.list /etc/apt/sources.list.bak
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后编辑：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nano /etc/apt/sources.list
</span></span></code></pre></td></tr></table>
</div>
</div><p>替换成下面的内容（适用于 Debian 10 Buster）：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">deb http://archive.debian.org/debian buster main contrib non-free
</span></span><span class="line"><span class="cl">deb-src http://archive.debian.org/debian buster main contrib non-free
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">deb http://archive.debian.org/debian-security buster/updates main contrib non-free
</span></span><span class="line"><span class="cl">deb-src http://archive.debian.org/debian-security buster/updates main contrib non-free
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">deb http://archive.debian.org/debian buster-updates main contrib non-free
</span></span><span class="line"><span class="cl">deb-src http://archive.debian.org/debian buster-updates main contrib non-free
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>允许使用过期的源</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;Acquire::Check-Valid-Until &#34;false&#34;;&#39;</span> &gt; /etc/apt/apt.conf.d/99ignore-release-date
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>更新系统</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">apt update <span class="o">&amp;&amp;</span> apt upgrade -y
</span></span></code></pre></td></tr></table>
</div>
</div><p>这样就能正常安装后续需要的工具了。</p>
</li>
</ol>
<blockquote>
<p>本部分由ChatGPT生成，经本人验证，可以解决问题。</p>
</blockquote>
<h1 id="配置vps">配置VPS
</h1><p>这里参考之前写过的文章<a class="link" href="https://bitdove.github.io/posts/how-to-build-proxy-with-xray/#configuring-the-vps"  target="_blank" rel="noopener"
    >【Proxy】How to Build Proxy with XRay</a>，此处不再赘述。</p>
<h1 id="安装xray-core">安装Xray-core
</h1><p>Xray官方提供了<a class="link" href="https://github.com/XTLS/Xray-install"  target="_blank" rel="noopener"
    >一键安装脚本</a>。</p>
<p>执行以下命令安装Xray-core</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo bash -c <span class="s2">&#34;</span><span class="k">$(</span>curl -L https://github.com/XTLS/Xray-install/raw/main/install-release.sh<span class="k">)</span><span class="s2">&#34;</span> @ install
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<ol>
<li>脚本依赖<code>curl</code>。若提示<code>bash: curl: command not found</code>，则执行以下命令安装<code>curl</code>:
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt install curl
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>脚本需要以<code>root</code>身份执行，所以前边要加<code>sudo</code>。</li>
</ol>
</blockquote>
<p>安装完成后，运行<code>xray version</code>，返回如下图所示的版本信息，代表安装成功。</p>
<p><img src="https://raw.githubusercontent.com/bitdove/PicsBed_1/main/re-config-VPS/xray-version.png"
	
	
	
	loading="lazy"
	
		alt="xray version"
	
	
></p>
<h1 id="配置xray-core">配置Xray-core
</h1><p>以下以<code>VLESS-TCP-XTLS-Vision-REALITY</code>为例。Xray官方也给出了各种配置示例，详情可以参考<a class="link" href="https://github.com/XTLS/Xray-examples"  target="_blank" rel="noopener"
    >GitHub Xray-examples</a>。</p>
<h2 id="生成uuid">生成uuid
</h2><p>生成一个<code>uuid</code>备用。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">xray uuid
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://raw.githubusercontent.com/bitdove/PicsBed_1/main/re-config-VPS/generate-uuid.png"
	
	
	
	loading="lazy"
	
		alt="uuid"
	
	
></p>
<p>本文使用以上图生成的<code>6b22b0d8-4bcb-4c95-b8d8-1a3488d0f460</code>。</p>
<blockquote>
<p>uuid相当于一个令牌(Token)，不要轻易示人，客户端需要配置此id才可使用此梯子。</p>
</blockquote>
<h2 id="生成x25519公私钥">生成x25519公私钥
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">xray x25519
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://raw.githubusercontent.com/bitdove/PicsBed_1/main/re-config-VPS/generate-x25519.png"
	
	
	
	loading="lazy"
	
		alt="x25519"
	
	
></p>
<p>本文使用上图生成的公私钥：</p>
<ul>
<li>Private key: YPus0-HqMBiQpiJ02hpnmJSodGRIhxG-tGlRjKoAV18</li>
<li>Public key: CLQaGhx37ZpcLbNhl5JXRay-5hJwbg7wYQtIDS5R9mc</li>
</ul>
<blockquote>
<p>私钥会写在Xray服务端的配置文件中，而公钥是需要使用此梯子的客户端需要配置的内容。</p>
</blockquote>
<h2 id="生成shortids">生成shortIds
</h2><p>shortIds是一个客户端可用的shortId列表，服务端可用此来区分不同的客户端。自己造就好了。规则如下：</p>
<ol>
<li>范围是<code>0</code>至<code>f</code>;</li>
<li>长度是2的倍数；</li>
<li>最大长度为16。</li>
</ol>
<p>本文使用<code>7df26a3cb5</code>。</p>
<blockquote>
<p>客户端需要填上shortIds中的其中之一才可使用该梯子。</p>
</blockquote>
<h2 id="修改xray配置文件">修改Xray配置文件
</h2><p>执行以下命令修改Xray配置文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo nano /usr/local/etc/xray/config.json
</span></span></code></pre></td></tr></table>
</div>
</div><p>根据VPS的IP地址以及前述步骤生成的各种id、密钥等，本文使用以下配置文件（未使用warp解锁chatGPT客户端）：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;log&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;loglevel&#34;</span><span class="p">:</span> <span class="s2">&#34;debug&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;inbounds&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;port&#34;</span><span class="p">:</span> <span class="mi">443</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;protocol&#34;</span><span class="p">:</span> <span class="s2">&#34;vless&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;settings&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;clients&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;6b22b0d8-4bcb-4c95-b8d8-1a3488d0f460&#34;</span><span class="p">,</span> <span class="c1">// run `xray uuid` to generate
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="nt">&#34;flow&#34;</span><span class="p">:</span> <span class="s2">&#34;xtls-rprx-vision&#34;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;decryption&#34;</span><span class="p">:</span> <span class="s2">&#34;none&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;streamSettings&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;network&#34;</span><span class="p">:</span> <span class="s2">&#34;tcp&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;security&#34;</span><span class="p">:</span> <span class="s2">&#34;reality&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;realitySettings&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&#34;dest&#34;</span><span class="p">:</span> <span class="s2">&#34;lapl.org:443&#34;</span><span class="p">,</span> <span class="c1">// A website that support TLS1.3 and h2. You can also use `1.1.1.1:443` as dest
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="nt">&#34;serverNames&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                        <span class="s2">&#34;lapl.org&#34;</span>        <span class="c1">// A server name in the cert of dest site. If you use `1.1.1.1:443` as dest, then you can leave `serverNames` empty, it is a possible ways to bypass Iran&#39;s internet speed restrictions.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="p">],</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&#34;privateKey&#34;</span><span class="p">:</span> <span class="s2">&#34;YPus0-HqMBiQpiJ02hpnmJSodGRIhxG-tGlRjKoAV18&#34;</span><span class="p">,</span> <span class="c1">// run `xray x25519` to generate. Public and private keys need to be corresponding.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="nt">&#34;shortIds&#34;</span><span class="p">:</span> <span class="p">[</span> <span class="c1">// Required, list of shortIds available to clients, can be used to distinguish different clients
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="s2">&#34;7df26a3cb5&#34;</span> <span class="c1">// If this item exists, client shortId can be empty. 0 to f, length is a multiple of 2, maximum length is 16
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;sniffing&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;enabled&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;destOverride&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;http&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;tls&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;quic&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;routeOnly&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;outbounds&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;tag&#34;</span><span class="p">:</span> <span class="s2">&#34;direct&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;protocol&#34;</span><span class="p">:</span> <span class="s2">&#34;freedom&#34;</span>  <span class="c1">// Main Outgoing Protocol
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;tag&#34;</span><span class="p">:</span> <span class="s2">&#34;block&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;protocol&#34;</span><span class="p">:</span> <span class="s2">&#34;blackhole&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>针对<code>VLESS-TCP-XTLS-Vision-REALITY</code>方案,以上配置文件需要注意以下内容：</p>
<ol>
<li><code>id</code>：之前通过<code>xray uuid</code>生成的内容；</li>
<li><code>dest</code>：填一个地址，这就是所谓“reality偷域名”中偷的那个域名，后边加上443端口。上述以洛杉矶图书馆的域名(<code>lapl.org</code>)为例子，填<code>lapl.org:443</code>；</li>
<li><code>serverNames</code>：填“偷”的域名，如<code>lapl.org</code>；</li>
<li><code>privateKey</code>：之前通过<code>xray x25519</code>生成的<strong>私钥</strong>（<strong>PrivateKey</strong>）；</li>
<li><code>shortIds</code>：之前编的shortIds，如<code>7df26a3cb5</code>;</li>
<li>IP地址：IPv4地址填VPS的公网IPv4地址，IPv6地址填Warp虚拟出的IPv6地址。</li>
</ol>
<blockquote>
<ol>
<li>关于偷域名有一些讲究，最好是偷自己，其次是偷与VPS IP地址同段的网址或者VPS附近的大学、图书馆、政府网站等等。对被偷域名的要求是支持TLS1.3和H2。详情参考<a class="link" href="https://github.com/XTLS/REALITY"  target="_blank" rel="noopener"
    >Xray官方解释</a>和<a class="link" href="https://github.com/XTLS/Xray-core/discussions/2256"  target="_blank" rel="noopener"
    >REALITY作者在GitHub的回复</a>。</li>
<li>warp解锁ChatGPT客户端参考<a class="link" href="https://bitdove.github.io/posts/how-to-build-proxy-with-xray/#warp-unlock-chatgpt-client"  target="_blank" rel="noopener"
    >Warp解锁ChatGPT客户端</a>。</li>
</ol>
</blockquote>
<h1 id="运行xray-core">运行Xray-core
</h1><p>以下为<code>Xray-core</code>进程常用管理命令。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Start Xray</span>
</span></span><span class="line"><span class="cl">sudo systemctl start xray
</span></span><span class="line"><span class="cl"><span class="c1"># Restart Xray</span>
</span></span><span class="line"><span class="cl">sudo systemctl restart xray
</span></span><span class="line"><span class="cl"><span class="c1"># Set XRay to start at boot</span>
</span></span><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> xray
</span></span><span class="line"><span class="cl"><span class="c1"># Check Xray status</span>
</span></span><span class="line"><span class="cl">sudo systemctl status xray
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="客户端配置">客户端配置
</h1><h2 id="android">Android
</h2><p>安卓端目前比较好用的客户端是<a class="link" href="https://github.com/2dust/v2rayNG"  target="_blank" rel="noopener"
    >V2RayNG</a>。</p>
<p>以上述服务端配置为例，在V2RayNG中添加一个VLESS配置，内容如下图：</p>
<p><img src="https://raw.githubusercontent.com/bitdove/PicsBed_1/main/re-config-VPS/Android-config.jpg"
	
	
	
	loading="lazy"
	
		alt="V2RayNG"
	
	
></p>
<p>需要注意：</p>
<ol>
<li><code>remarks</code>：给该梯子起个名字；</li>
<li><code>address</code>：梯子的IPv4地址；</li>
<li><code>port</code>：Reality使用443端口；</li>
<li><code>id</code>：即服务端的<code>id</code>；</li>
<li><code>flow</code>：与服务端一致，<code>xtls-rprx-vision</code>；</li>
<li><code>encryption</code>：none；</li>
<li><code>network</code>：tcp；</li>
<li><code>TLS</code>：选reality；</li>
<li><code>SNI</code>：即偷的域名；</li>
<li><code>PublicKey</code>：即服务端<code>xray x25519</code>生成的公私钥中的<strong>公钥</strong>（<strong>PublicKey</strong>）。</li>
<li><code>ShortId</code>：即服务端<code>ShortIds</code>中的一个。</li>
</ol>
<h2 id="windows">Windows
</h2><p>Windows目前比较好用的客户端为<a class="link" href="https://github.com/2dust/v2rayN"  target="_blank" rel="noopener"
    >V2RayN</a>。与安卓端的V2RayNG同作者。</p>
<blockquote>
<p>其实V2RayN是一个跨平台GUI客户端，支持Windows、Linux、macOS。</p>
</blockquote>
<p>以上述服务端配置为例，在V2RayN中添加一个VLESS配置，内容如下图：</p>
<p><img src="https://raw.githubusercontent.com/bitdove/PicsBed_1/main/re-config-VPS/Windows-V2RayN.png"
	
	
	
	loading="lazy"
	
		alt="V2RayN"
	
	
></p>
<p>需要注意的内容同安卓端一样。</p>
<ol>
<li><code>别名</code>：给该梯子起个名字；</li>
<li><code>地址</code>：梯子的IPv4地址；</li>
<li><code>端口</code>：Reality使用443端口；</li>
<li><code>用户ID</code>：即服务端的<code>id</code>；</li>
<li><code>流控</code>：与服务端一致，<code>xtls-rprx-vision</code>；</li>
<li><code>加密方式</code>：none；</li>
<li><code>传输协议</code>：tcp；</li>
<li><code>传输层安全</code>：选reality；</li>
<li><code>SNI</code>：即偷的域名；</li>
<li><code>PublicKey</code>：即服务端<code>xray x25519</code>生成的公私钥中的<strong>公钥</strong>（<strong>PublicKey</strong>）。</li>
<li><code>ShortId</code>：即服务端<code>ShortIds</code>中的一个。</li>
</ol>
<h2 id="macos">macOS
</h2><p>macOS端目前本人没有使用GUI客户端，而是直接命令行跑的<code>Xray-core</code>，详情可参考<a class="link" href="https://bitdove.github.io/posts/xray-core-as-client/"  target="_blank" rel="noopener"
    >You Don&rsquo;t Need a GUI Proxy Client</a>。</p>
<h1 id="reference">Reference
</h1><ol>
<li><a class="link" href="https://bitdove.github.io/posts/how-to-build-proxy-with-xray/#configuring-the-vps"  target="_blank" rel="noopener"
    >【Proxy】How to Build Proxy with XRay</a></li>
<li><a class="link" href="https://github.com/XTLS"  target="_blank" rel="noopener"
    >Xray官方GitHub</a></li>
<li><a class="link" href="https://github.com/XTLS/Xray-install"  target="_blank" rel="noopener"
    >Xray官方安装教程</a></li>
<li><a class="link" href="https://github.com/XTLS/Xray-examples"  target="_blank" rel="noopener"
    >Xray官方配置示例</a></li>
<li><a class="link" href="https://github.com/XTLS/REALITY"  target="_blank" rel="noopener"
    >Xray官方解释</a></li>
<li><a class="link" href="https://github.com/XTLS/Xray-core/discussions/2256"  target="_blank" rel="noopener"
    >REALITY作者在GitHub的回复</a></li>
<li><a class="link" href="https://github.com/2dust/v2rayNG"  target="_blank" rel="noopener"
    >V2RayNG官方GitHub</a></li>
<li><a class="link" href="https://github.com/2dust/v2rayN"  target="_blank" rel="noopener"
    >V2RayN官方GitHub</a></li>
<li><a class="link" href="https://bitdove.github.io/posts/xray-core-as-client/"  target="_blank" rel="noopener"
    >You Don&rsquo;t Need a GUI Proxy Client</a></li>
</ol>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/proxy/">Proxy</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title"></h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/posts/xray-core-as-client/">
        
        

        <div class="article-details">
            <h2 class="article-title">[TODO] You Don&#39;t Need a GUI Proxy Client</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/posts/how-to-build-proxy-with-xray/">
        
        

        <div class="article-details">
            <h2 class="article-title">【Proxy】How to Build Proxy with Xray</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/posts/wipenglish-learningthe-system-of-english-grammar/">
        
        

        <div class="article-details">
            <h2 class="article-title">【WIP】【English Learning】The System of English Grammar</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/posts/wip%E5%81%A5%E5%BA%B7%E4%B8%80%E5%9C%BA%E6%89%8B%E6%9C%AF%E8%AE%A9%E6%88%91%E9%87%8D%E6%96%B0%E8%AE%A4%E8%AF%86%E7%94%B2%E7%8A%B6%E8%85%BA/">
        
        

        <div class="article-details">
            <h2 class="article-title">【WIP】【健康】一场手术让我重新认识甲状腺</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/posts/furniture/">
        
        

        <div class="article-details">
            <h2 class="article-title">【装修】家具选购</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2018 - 
        
        2025 bitdove. All Rights Reserved.
    </section>
    
    <section class="powerby">
         <br />
        
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
