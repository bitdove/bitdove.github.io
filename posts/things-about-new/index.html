<!DOCTYPE html>
<html dir="ltr" lang="zh">
<head><meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/><meta content="new expression 分配内存-调用构造函数-返回指针\nThe new operator is an operator which denotes a request for memory allocation on the Heap. If sufficient memory is available, new operator initializes the memory and returns the address of the newly allocated and initialized memory to the pointer variable. When you create an object of class using new keyword(normal new).\nThe memory for the object is allocated using operator new from heap. The constructor of the class is invoked to properly initialize this memory. operator new 只分配内存-返回指针/抛出异常\n" name="description"/>
<title>【一文读懂】C++ new那些事儿</title>
<link href="https://bitdove.github.io/posts/things-about-new/" rel="canonical"/>
<link href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css" rel="stylesheet"/><meta content="【一文读懂】C++ new那些事儿" property="og:title"/>
<meta content="new expression 分配内存-调用构造函数-返回指针\nThe new operator is an operator which denotes a request for memory allocation on the Heap. If sufficient memory is available, new operator initializes the memory and returns the address of the newly allocated and initialized memory to the pointer variable. When you create an object of class using new keyword(normal new).\nThe memory for the object is allocated using operator new from heap. The constructor of the class is invoked to properly initialize this memory. operator new 只分配内存-返回指针/抛出异常\n" property="og:description"/>
<meta content="https://bitdove.github.io/posts/things-about-new/" property="og:url"/>
<meta content="空山无我心自闲" property="og:site_name"/>
<meta content="article" property="og:type"/><meta content="Post" property="article:section"/><meta content="C/C++" property="article:tag"/><meta content="2024-09-30T09:52:09+08:00" property="article:published_time"/><meta content="2024-09-30T09:52:09+08:00" property="article:modified_time"/>
<meta content="【一文读懂】C++ new那些事儿" name="twitter:title"/>
<meta content="new expression 分配内存-调用构造函数-返回指针\nThe new operator is an operator which denotes a request for memory allocation on the Heap. If sufficient memory is available, new operator initializes the memory and returns the address of the newly allocated and initialized memory to the pointer variable. When you create an object of class using new keyword(normal new).\nThe memory for the object is allocated using operator new from heap. The constructor of the class is invoked to properly initialize this memory. operator new 只分配内存-返回指针/抛出异常\n" name="twitter:description"/>
<link href="/favicon.ico" rel="shortcut icon"/>
</head>
<body class="article-page">
<script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "dark");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky">
<button aria-label="" class="hamburger hamburger--spin" id="toggle-menu" type="button">
<span class="hamburger-box">
<span class="hamburger-inner"></span>
</span>
</button>
<header>
<figure class="site-avatar">
<a href="/">
<img alt="Avatar" class="site-logo" height="300" loading="lazy" src="/img/avatar_hu16717790870751216787.png" width="300"/>
</a>
</figure>
<div class="site-meta">
<h1 class="site-name"><a href="/">空山无我心自闲</a></h1>
<h2 class="site-description"></h2>
</div>
</header><ol class="menu" id="main-menu">
<li>
<a href="/">
<svg class="icon icon-tabler icon-tabler-home" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<polyline points="5 12 3 12 12 3 21 12 19 12"></polyline>
<path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"></path>
<path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"></path>
</svg>
<span>首页</span>
</a>
</li>
<li>
<a href="/%E5%85%B3%E4%BA%8E/">
<svg class="icon icon-tabler icon-tabler-user" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="12" cy="7" r="4"></circle>
<path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>
</svg>
<span>关于</span>
</a>
</li>
<li>
<a href="/archives/">
<svg class="icon icon-tabler icon-tabler-archive" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<rect height="4" rx="2" width="18" x="3" y="4"></rect>
<path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10"></path>
<line x1="10" x2="14" y1="12" y2="12"></line>
</svg>
<span>归档</span>
</a>
</li>
<li>
<a href="/search/">
<svg class="icon icon-tabler icon-tabler-search" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="10" cy="10" r="7"></circle>
<line x1="21" x2="15" y1="21" y2="15"></line>
</svg>
<span>搜索</span>
</a>
</li>
<li>
<a href="/%E9%93%BE%E6%8E%A5/">
<svg class="icon icon-tabler icon-tabler-link" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path>
<path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path>
</svg>
<span>链接</span>
</a>
</li>
<li class="menu-bottom-section">
<ol class="menu">
<li id="dark-mode-toggle">
<svg class="icon icon-tabler icon-tabler-toggle-left" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="8" cy="12" r="2"></circle>
<rect height="12" rx="6" width="20" x="2" y="6"></rect>
</svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="16" cy="12" r="2"></circle>
<rect height="12" rx="6" width="20" x="2" y="6"></rect>
</svg>
<span></span>
</li>
</ol>
</li>
</ol>
</aside>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class="widget-icon">
<svg class="icon icon-tabler icon-tabler-hash" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<line x1="5" x2="19" y1="9" y2="9"></line>
<line x1="5" x2="19" y1="15" y2="15"></line>
<line x1="11" x2="7" y1="4" y2="20"></line>
<line x1="17" x2="13" y1="4" y2="20"></line>
</svg>
</div>
<h2 class="widget-title section-title"></h2>
<div class="widget--toc">
<nav id="TableOfContents">
<ol>
<li><a href="#new-expression">new expression</a></li>
<li><a href="#operator-new">operator new</a></li>
<li><a href="#new-operator-vs-operator-new">New operator vs operator new</a></li>
<li><a href="#references">References</a></li>
</ol>
</nav>
</div>
</section>
</aside>
<main class="main full-width">
<article class="main-article">
<header class="article-header">
<div class="article-details">
<header class="article-category">
<a href="/categories/%E6%8A%80%E6%9C%AF%E4%B8%8E%E9%A1%B9%E7%9B%AE/" style="background-color: #2a9d8f; color: #fff;">
                技术与项目
            </a>
</header>
<div class="article-title-wrapper">
<h2 class="article-title">
<a href="/posts/things-about-new/">【一文读懂】C++ new那些事儿</a>
</h2>
</div>
<footer class="article-time">
<div>
<svg class="icon icon-tabler icon-tabler-calendar-time" fill="none" height="56" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="56" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4"></path>
<circle cx="18" cy="18" r="4"></circle>
<path d="M15 3v4"></path>
<path d="M7 3v4"></path>
<path d="M3 11h16"></path>
<path d="M18 16.496v1.504l1 1"></path>
</svg>
<time class="article-time--published">2024/09/30</time>
</div>
</footer>
</div>
</header>
<section class="article-content">
<h1 id="new-expression">new expression
</h1><p>分配内存-调用构造函数-返回指针</p>
<p>The new operator is an operator which denotes a request for memory allocation on the Heap. If sufficient memory is available, new operator initializes the memory and returns the address of the newly allocated and initialized memory to the pointer variable. When you create an object of class using new keyword(normal new).</p>
<ul>
<li>The memory for the object is allocated using operator new from heap.</li>
<li>The constructor of the class is invoked to properly initialize this memory.</li>
</ul>
<h1 id="operator-new">operator new
</h1><p>只分配内存-返回指针/抛出异常</p>
<p>Operator new is a function that allocates raw memory and conceptually a bit similar to malloc().</p>
<ul>
<li>It is the mechanism of overriding the default heap allocation logic.</li>
<li>It doesn’t initializes the memory i.e constructor is not called. However, after our overloaded new returns, the compiler then automatically calls the constructor also as applicable.</li>
<li>It’s also possible to overload operator new either globally, or for a specific class</li>
</ul>
<h1 id="new-operator-vs-operator-new">New operator vs operator new
</h1><ul>
<li>Operator vs function: new is an operator as well as a keyword whereas operator new is only a function.</li>
<li>New calls “Operator new”: “new operator” calls “operator new()” , like the way + operator calls operator +()</li>
<li>“Operator new” can be Overloaded: Operator new can be overloaded just like functions allowing us to do customized tasks.</li>
<li>Memory allocation: ‘new expression’ call ‘operator new’ to allocate raw memory, then call constructor.</li>
</ul>
<h1 id="references">References
</h1><blockquote>
<ol>
<li></li>
</ol>
</blockquote>
</section>
<footer class="article-footer">
<section class="article-tags">
<a href="/tags/c/c++/">C/C++</a>
</section>
<section class="article-copyright">
<svg class="icon icon-tabler icon-tabler-copyright" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="12" cy="12" r="9"></circle>
<path d="M14.5 9a3.5 4 0 1 0 0 6"></path>
</svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
</article>
<aside class="related-content--wrapper">
<h2 class="section-title"></h2>
<div class="related-content">
<div class="flex article-list--tile">
<article class="">
<a href="/posts/cpp-constructor-destructor-calling-order/">
<div class="article-details">
<h2 class="article-title">【一文读懂】C++构造函数与析构函数的调用顺序</h2>
</div>
</a>
</article>
<article class="">
<a href="/posts/cpp-type-size-test/">
<div class="article-details">
<h2 class="article-title">【测试】C++类型大小测试</h2>
</div>
</a>
</article>
<article class="">
<a href="/posts/cpp-stl-container/">
<div class="article-details">
<h2 class="article-title">【一文读懂】C++ STL中的容器</h2>
</div>
</a>
</article>
<article class="">
<a href="/posts/cpp-static/">
<div class="article-details">
<h2 class="article-title">【一文读懂】C++中的static关键字</h2>
</div>
</a>
</article>
<article class="">
<a href="/posts/build-echo-project-with-cmake/">
<div class="article-details">
<h2 class="article-title">如何使用CMake构建项目？</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<footer class="site-footer">
<section class="copyright">
        © 
        
            2018 - 
        
        2026 bitdove. All Rights Reserved.
    </section>
<section class="powerby">
<br/>
</section>
</footer>
<div aria-hidden="true" class="pswp" role="dialog" tabindex="-1">
<div class="pswp__bg"></div>
<div class="pswp__scroll-wrap">
<div class="pswp__container">
<div class="pswp__item"></div>
<div class="pswp__item"></div>
<div class="pswp__item"></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class="pswp__top-bar">
<div class="pswp__counter"></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title="Share"></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class="pswp__preloader">
<div class="pswp__preloader__icn">
<div class="pswp__preloader__cut">
<div class="pswp__preloader__donut"></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class="pswp__share-tooltip"></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class="pswp__caption">
<div class="pswp__caption__center"></div>
</div>
</div>
</div>
</div><script crossorigin="anonymous" defer="" integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js">
</script><script crossorigin="anonymous" defer="" integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js">
</script><link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css" rel="stylesheet"/><link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css" rel="stylesheet"/>
</main>
</div>
<script crossorigin="anonymous" integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js">
</script><script defer="" src="/ts/main.js" type="text/javascript"></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
</body>
</html>
